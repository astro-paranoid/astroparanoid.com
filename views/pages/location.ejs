<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('../layout/head') %>
  <title>Astro-Paranoid</title>
</head>
<body>
  <header>
    <%- include('../layout/header')%>
  </header>

  <main id="location-wrapper">
      <article class="" id="images-container">
        <div>
          <img src="/images/astronaut.png" alt="astronaut image" class="scale-image" id="astronaut-scale-image">
        </div>
        <div>
            <img src="/images/needle.png" alt="space needle image" class="scale-image" id="needle-scale-image">
        </div>
        <div>
          <img src="<%= asteroid.img %>" alt="asteroid image" class="scale-image" id="asteroid-scale-image">
        </div>
      </article>

      <div id="map" style="height: 50vh"></div>
      
      <section id="city-stats">
      </section>
      <div id="asteroid-stats">
        <table id="asteroid-table">
          <tr>
            <td>Name: </td>
            <td> <%=asteroid.name%></td>
          </tr>
          <tr>
            <td>Is this a threat? </td>
            <td> <%=asteroid.hazardous%></td>
          </tr>
          <tr>
            <td>Size: </td>
            <td> <%= Number(asteroid.diameter_feet_min).toFixed(2)%> - <%= Number(asteroid.diameter_feet_min).toFixed(2)%>
              feet wide</td>
          </tr>
          <tr>
            <td>Date it will be closest to Earth: </td>
            <td> <%=asteroid.closest_date%></td>
          </tr>
          <tr>
            <td>Velocity </td>
            <td> <%= Number(asteroid.velocity_mph).toFixed(2)%></td>
          </tr>
          <tr>
            <td>Set to miss Earth by:</td>
            <td> <%= Number(asteroid.miss_distance_miles).toFixed(2)%> miles</td>
          </tr>
          <tr>
            <td>On Nasa's impact monitoring list?</td>
            <td> <%=asteroid.sentry_object%></td>
          </tr>
        </table>
      </div>
  </main>
    
  <footer>
    <%- include('../layout/footer')%>
  </footer>
  <script>
    var midpoint = (<%= asteroid.diameter_feet_min %> + 5.5 + 605) / 3;
    var asteroidScale = <%= asteroid.diameter_feet_min %> / midpoint;
    var personScale = 5.5 / midpoint;
    var needleScale = 605 / midpoint;

    console.log('midpoint', midpoint);

    var asteroidSize = { min: <%= asteroid.diameter_feet_min / 3.2808 %>, max: <%= asteroid.diameter_feet_max / 3.2808 %> };
  </script>

  <script
    src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous">
  </script> 
  <script src="../../js/app.js"></script>
  <script async defer src="<%= `https://maps.googleapis.com/maps/api/js?key=${process.env.GOOGLE_MAPS_API}&callback=initMap` %>"></script>
</body>
</html>

